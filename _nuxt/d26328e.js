(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{447:function(e,t,n){"use strict";var r=n(11),o=(n(43),{components:{},data:function(){return{validated:!1,model:{firstName:"Mark",lastName:"Otto",username:"",city:"",state:"",zip:"",agree:!1}}},methods:{firstFormSubmit:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}}),l=n(7),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("card",[t("h3",{staticClass:"mb-0",attrs:{slot:"header"},slot:"header"},[e._v("Custom styles")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-8"},[t("p",{staticClass:"mb-0"},[e._v("\n        For custom form validation messages, you’ll need to provide error messages to your\n        "),t("code",[e._v("<base-input>")]),e._v(" components. This disables the browser default feedback tooltips, but still\n        provides access to the form\n        validation APIs in JavaScript.\n        "),t("br"),t("br"),e._v("\n        When attempting to submit, you’ll see the"),t("code",[e._v(".is-valid")]),e._v(" and "),t("code",[e._v(".is-invalid")]),e._v(" classes applied\n        to your form controls.\n      ")])])]),e._v(" "),t("hr"),e._v(" "),t("validation-observer",{ref:"formValidator",scopedSlots:e._u([{key:"default",fn:function(n){var r=n.handleSubmit;return[t("form",{staticClass:"needs-validation",on:{submit:function(t){return t.preventDefault(),r(e.firstFormSubmit)}}},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-4"},[t("base-input",{attrs:{label:"First name",name:"First name",placeholder:"First name","success-message":"Looks good!",rules:"required"},model:{value:e.model.firstName,callback:function(t){e.$set(e.model,"firstName",t)},expression:"model.firstName"}})],1),e._v(" "),t("div",{staticClass:"col-md-4"},[t("base-input",{attrs:{label:"Last name",name:"Last name",placeholder:"Last name",rules:"required","success-message":"Looks good!"},model:{value:e.model.lastName,callback:function(t){e.$set(e.model,"lastName",t)},expression:"model.lastName"}})],1),e._v(" "),t("div",{staticClass:"col-md-4"},[t("base-input",{attrs:{label:"Username",name:"Username",placeholder:"Username",rules:"required"},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1)]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-6"},[t("base-input",{attrs:{label:"City",name:"City",placeholder:"City",rules:"required"},model:{value:e.model.city,callback:function(t){e.$set(e.model,"city",t)},expression:"model.city"}})],1),e._v(" "),t("div",{staticClass:"col-md-3"},[t("base-input",{attrs:{label:"State",name:"State",placeholder:"State",rules:"required"},model:{value:e.model.state,callback:function(t){e.$set(e.model,"state",t)},expression:"model.state"}})],1),e._v(" "),t("div",{staticClass:"col-md-3"},[t("base-input",{attrs:{label:"Zip",name:"Zip",placeholder:"Zip",rules:"required"},model:{value:e.model.zip,callback:function(t){e.$set(e.model,"zip",t)},expression:"model.zip"}})],1)]),e._v(" "),t("base-input",{attrs:{rules:{required:{allowFalse:!1}},name:"Terms"}},[t("base-checkbox",{model:{value:e.model.agree,callback:function(t){e.$set(e.model,"agree",t)},expression:"model.agree"}},[e._v("\n          Agree to terms and conditions\n        ")])],1),e._v(" "),t("base-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("Submit form")])],1)]}}])})],1)}),[],!1,null,null,null);t.a=component.exports},448:function(e,t,n){"use strict";var r=n(11),o=(n(43),{components:{},data:function(){return{model:{firstName:"Mark",lastName:"Otto",username:"",city:"",state:"",zip:"",agree:!1}}},methods:{submit:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}}),l=n(7),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("card",[t("h3",{staticClass:"mb-0",attrs:{slot:"header"},slot:"header"},[e._v("Browser defaults")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-8"},[t("p",{staticClass:"mb-0"},[e._v("\n        Not interested in custom validation feedback messages or writing JavaScript to change form behaviors? All good, you can use the browser defaults. Try submitting the form below. Depending on your browser and OS, you’ll\n        see a slightly different style of feedback.\n        "),t("br"),t("br"),e._v("\n        While these feedback styles cannot be styled with CSS, you can still customize the feedback text through JavaScript.\n      ")])])]),e._v(" "),t("hr"),e._v(" "),t("form",{staticClass:"needs-validation",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-4"},[t("base-input",{attrs:{label:"First name",name:"First name",placeholder:"First name",required:""},model:{value:e.model.firstName,callback:function(t){e.$set(e.model,"firstName",t)},expression:"model.firstName"}})],1),e._v(" "),t("div",{staticClass:"col-md-4"},[t("base-input",{attrs:{label:"Last name",name:"Last name",placeholder:"Last name",required:""},model:{value:e.model.lastName,callback:function(t){e.$set(e.model,"lastName",t)},expression:"model.lastName"}})],1),e._v(" "),t("div",{staticClass:"col-md-4"},[t("base-input",{attrs:{label:"Username",name:"Username",placeholder:"Username",required:""},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1)]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-6"},[t("base-input",{attrs:{label:"City",name:"City",placeholder:"City",required:""},model:{value:e.model.city,callback:function(t){e.$set(e.model,"city",t)},expression:"model.city"}})],1),e._v(" "),t("div",{staticClass:"col-md-3"},[t("base-input",{attrs:{label:"State",name:"State",placeholder:"State",required:""},model:{value:e.model.state,callback:function(t){e.$set(e.model,"state",t)},expression:"model.state"}})],1),e._v(" "),t("div",{staticClass:"col-md-3"},[t("base-input",{attrs:{label:"Zip",name:"Zip",placeholder:"Zip",required:""},model:{value:e.model.zip,callback:function(t){e.$set(e.model,"zip",t)},expression:"model.zip"}})],1)]),e._v(" "),t("base-input",[t("base-checkbox",{model:{value:e.model.agree,callback:function(t){e.$set(e.model,"agree",t)},expression:"model.agree"}},[e._v("\n        Agree to terms and conditions\n      ")])],1),e._v(" "),t("base-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("Submit form")])],1)])}),[],!1,null,null,null);t.a=component.exports},449:function(e,t,n){"use strict";var r=n(11),o=(n(43),{components:{},data:function(){return{validated:!1,model:{firstName:"Mark",lastName:"Otto",username:"",city:"",state:"",zip:"",agree:!1}}},methods:{onSubmit:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.$refs.formValidator.validate()}}),l=n(7),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("card",[t("h3",{staticClass:"mb-0",attrs:{slot:"header"},slot:"header"},[e._v("Server side validation")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-8"},[t("p",{staticClass:"mb-0"},[e._v("\n        We recommend using client side validation, but in case you require server side, you can indicate invalid and\n        valid form fields with "),t("code",[e._v(".is-invalid")]),e._v(" and "),t("code",[e._v(".is-valid")]),e._v(". Note that\n        "),t("code",[e._v(".invalid-feedback")]),e._v("\n        is also supported with these classes.\n      ")])])]),e._v(" "),t("hr"),e._v(" "),t("validation-observer",{ref:"formValidator",scopedSlots:e._u([{key:"default",fn:function(n){var r=n.handleSubmit;return[t("form",{staticClass:"needs-validation",on:{submit:function(t){return t.preventDefault(),r(e.onSubmit)}}},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-4"},[t("base-input",{attrs:{label:"First name",rules:"required",name:"First name",placeholder:"First name","success-message":"Looks good!"},model:{value:e.model.firstName,callback:function(t){e.$set(e.model,"firstName",t)},expression:"model.firstName"}})],1),e._v(" "),t("div",{staticClass:"col-md-4"},[t("base-input",{attrs:{label:"Last name",rules:"required",name:"Last name",placeholder:"Last name","success-message":"Looks good!"},model:{value:e.model.lastName,callback:function(t){e.$set(e.model,"lastName",t)},expression:"model.lastName"}})],1),e._v(" "),t("div",{staticClass:"col-md-4"},[t("base-input",{attrs:{label:"Username",rules:"required",name:"Username",placeholder:"Username","success-message":"Looks good!"},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1)]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-6"},[t("base-input",{attrs:{label:"City",name:"City",rules:"required",placeholder:"City","success-message":"Looks good!"},model:{value:e.model.city,callback:function(t){e.$set(e.model,"city",t)},expression:"model.city"}})],1),e._v(" "),t("div",{staticClass:"col-md-3"},[t("base-input",{attrs:{label:"State",name:"State",rules:"required",placeholder:"State","success-message":"Looks good!"},model:{value:e.model.state,callback:function(t){e.$set(e.model,"state",t)},expression:"model.state"}})],1),e._v(" "),t("div",{staticClass:"col-md-3"},[t("base-input",{attrs:{label:"Zip",name:"Zip",rules:"required",placeholder:"Zip","success-message":"Looks good!"},model:{value:e.model.zip,callback:function(t){e.$set(e.model,"zip",t)},expression:"model.zip"}})],1)]),e._v(" "),t("base-input",{attrs:{rules:{required:{allowFalse:!1}},name:"Terms"}},[t("base-checkbox",{model:{value:e.model.agree,callback:function(t){e.$set(e.model,"agree",t)},expression:"model.agree"}},[e._v("\n          Agree to terms and conditions\n        ")])],1),e._v(" "),t("base-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("Submit form")])],1)]}}])})],1)}),[],!1,null,null,null);t.a=component.exports},619:function(e,t,n){"use strict";n(33),n(21),n(27),n(37),n(38),n(23),n(19),n(46),n(44),n(45);var r=n(9);n(10);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(d)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={name:"file-input",inheritAttrs:!1,props:{initialLabel:{type:String,default:"Select file"}},data:function(){return{files:[]}},computed:{listeners:function(){return d(d({},this.$listeners),{},{change:this.fileChange})},label:function(){var e,t=[],n=o(this.files);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.name)}}catch(e){n.e(e)}finally{n.f()}return t.length?t.join(", "):this.initialLabel}},methods:{fileChange:function(e){this.files=e.target.files,this.$emit("change",this.files)}}},f=n(7),component=Object(f.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-file"},[t("input",e._g(e._b({staticClass:"custom-file-input",attrs:{type:"file",id:"customFileLang",lang:"en"}},"input",e.$attrs,!1),e.listeners)),e._v(" "),t("label",{staticClass:"custom-file-label",attrs:{for:"customFileLang"}},[e._v("\n    "+e._s(e.label)+"\n  ")])])}),[],!1,null,null,null);t.a=component.exports},627:function(e,t,n){},628:function(e,t,n){},686:function(e,t,n){"use strict";n(627)},687:function(e,t,n){"use strict";n(628)},786:function(e,t,n){"use strict";n.r(t);n(88),n(69),n(47),n(27),n(10),n(249),n(86);var r,o=n(171),l=n.n(o),c=n(11),d=n(9),m=(n(436),n(437)),f=n.n(m),v=(n(438),n(439)),h=n.n(v),_=(n(43),n(172),n(128)),y=n(447),k=n(448),C=n(449),w=n(619),x=n(440),S=n.n(x),D=n(458),O=n.n(D),N=(n(459),{name:"form-components",layout:"DashboardLayout",middleware:["isAuthenticated","checkAdmin"],components:(r={CustomStylesValidation:y.a,BrowserDefaultsValidation:k.a,ServerSideValidation:C.a},Object(d.a)(r,h.a.name,h.a),Object(d.a)(r,f.a.name,f.a),Object(d.a)(r,"FileInput",w.a),Object(d.a)(r,"flatPicker",O.a),r),data:function(){return{validated:!1,seen:!0,days:[],shift:[],deck:[],selectedDay:null,selectedShift:null,selectedDeck:null,adult:[],kid:[],aTotal:0,kTotal:0,total:0,aprice:0,a_fprice:0,kprice:0,k_fprice:0,phone:"",isLoading:!1,name:"",mode:"Cash",gst:0,gst1:0,vat:0,vat1:0,at:[],at1:[],infant:0,isOnce:!1,veg:0,nonveg:0,other:0,desc:"",decks:[],cruiseDates:[],closedShifts:[],infantdetails:[],tod:""}},watch:{adult:function(){this.aTotal=0,this.aTotal=this.aTotal+this.adult.length*(this.aprice+this.a_fprice)},kid:function(){this.kTotal=0,this.kTotal=this.kTotal+this.kid.length*(this.kprice+this.k_fprice)},selectedDay:function(){this.check()},selectedShift:function(){var e=this;e.at=e.at1.filter((function(t){return t.name==e.selectedShift})),e.deck=e.at.length>0?e.at[0].pricing.map((function(e){return e.deck})):[],e.selectedDeck=null},selectedDeck:function(){var e=this;e.aTotal=0,e.kTotal=0;var t=e.at.length>0?e.at[0].pricing.filter((function(t){return t.deck==e.selectedDeck})):[];e.aprice=t.length>0?parseFloat(t[0].adult):0,e.a_fprice=t.length>0?parseFloat(t[0].a_fprice):0,e.kprice=t.length>0?parseFloat(t[0].kid):0,e.k_fprice=t.length>0?parseFloat(t[0].k_fprice):0,e.aTotal=e.aTotal+e.adult.length*(e.aprice+e.a_fprice),e.kTotal=e.kTotal+e.kid.length*(e.kprice+e.k_fprice)}},methods:{getcat:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e).days=n.getNextThreeDays(),t.next=4,_.a.collection("settings").getOne("wpaaz5r1qamc9o1");case 4:return r=t.sent,_.a.collection("settings").subscribe("wpaaz5r1qamc9o1",(function(e){n.gst=e.record.gst,n.gst1=e.record.gst1,n.vat=e.record.vat,n.vat1=e.record.vat1})),o=new Date,l=function(e){return e.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})},n.tod=l(o),n.gst=r.gst,n.gst1=r.gst1,n.vat=r.vat,n.vat1=r.vat1,t.next=15,_.a.collection("webcruise").getFullList({sort:"-created"});case 15:n.at1=t.sent,console.log(n.at1),_.a.collection("webcruise").subscribe("*",(function(e){n.getDatas()})),n.getData(),n.check1();case 20:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;e.shift=e.at1.map((function(e){return e.name})),e.decks=e.at1.map((function(t){return{name:t.name,isOpen:e.isCruiseOpen(t.closing_time)}})),e.selectedShift=e.decks.filter((function(e){return 1==e.isOpen})).length>0?e.decks.filter((function(e){return 1==e.isOpen}))[0].name:null,e.at=e.at1.filter((function(t){return t.name==e.selectedShift})),e.deck=e.at.length>0?e.at[0].pricing.map((function(e){return e.deck})):[],e.selectedDay=e.days[0],e.closedShifts=e.decks.filter((function(e){return 0==e.isOpen})).map((function(e){return e.name}))},getDatas:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,_.a.collection("webcruise").getFullList({sort:"-created"});case 3:n.at1=t.sent,n.shift=n.at1.map((function(e){return e.name})),n.decks=n.at1.map((function(e){return{name:e.name,isOpen:n.isCruiseOpen(e.closing_time)}})),n.selectedShift=n.decks.filter((function(e){return 1==e.isOpen})).length>0?n.decks.filter((function(e){return 1==e.isOpen}))[0].name:null,n.at=n.at1.filter((function(e){return e.name==n.selectedShift})),n.deck=n.at.length>0?n.at[0].pricing.map((function(e){return e.deck})):[],n.selectedDay=n.days[0];case 10:case"end":return t.stop()}}),t)})))()},isCruiseOpen:function(time){if(""!=time){var e=new Date,t=time.split(":"),n=parseInt(t[0]),r=parseInt(t[1].split(" ")[0]),o=t[1].split(" ")[1];"PM"===o&&12!==n?n+=12:"AM"===o&&12===n&&(n=0);var l=new Date;return l.setHours(n,r,0,0),e<l}return!0},getNextThreeDays:function(){var e=new Date,t=new Date(e);t.setDate(e.getDate()+1);var n=new Date(e);n.setDate(e.getDate()+2);var r=function(e){return e.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})};return[r(e),r(t),r(n)]},selects:function(e){var t=this;0==t.cruiseDates.filter((function(n){return n.cruise==e&&n.dates==t.selectedDay})).length?t.selectedShift=e:l()({showClose:!0,message:"".concat(e," is not available for this date!"),type:"warning"})},check:function(){this.selectedShift=null},check1:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,_.a.collection("cruise_logs").getFullList({sort:"-created"});case 3:return r=t.sent,n.cruiseDates=r.map((function(e){return{cruise:e.cruise,dates:e.dates}})),t.next=7,_.a.collection("cruise_logs").subscribe("*",function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.collection("cruise_logs").getFullList({sort:"-created"});case 2:r=e.sent,n.cruiseDates=r.map((function(e){return{cruise:e.cruise,dates:e.dates}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()},add:function(){this.adult.push({name:"",age:""})},add1:function(){this.kid.push({name:"",age:""})},add2:function(){var e=this;0==e.isOnce&&S.a.fire({title:"Book a kid seat if you want a seat for your infant!",buttonsStyling:!1,confirmButtonClass:"btn btn-success btn-fill"}),e.isOnce=!0,e.infant++,e.infantdetails.push({name:"",age:""})},minus:function(){this.adult.splice(0,1)},minus1:function(){this.kid.splice(0,1)},minus2:function(){var e=this;e.infant>0&&(e.infant--,e.infantdetails.splice(0,1))},ad:function(){var e=this,t=e.adult.length+e.kid.length;e.veg+e.nonveg+e.other<t?e.veg++:l()({showClose:!0,message:"Should not exceed total no. of person!",type:"warning"})},ad1:function(){var e=this,t=e.adult.length+e.kid.length;e.veg+e.nonveg+e.other<t?e.nonveg++:l()({showClose:!0,message:"Should not exceed total no. of person!",type:"warning"})},ad2:function(){var e=this,t=e.adult.length+e.kid.length;e.veg+e.nonveg+e.other<t?e.other++:l()({showClose:!0,message:"Should not exceed total no. of person!",type:"warning"})},mi:function(){this.veg>0&&this.veg--},mi1:function(){this.nonveg>0&&this.nonveg--},mi2:function(){this.other>0&&this.other--},save:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o,d,m,dt,f,v,h,y,k,C,w,data,x,S,D;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(n=e).selectedDay){t.next=4;break}return l()({showClose:!0,message:"Please Select Date!",type:"warning"}),t.abrupt("return");case 4:if(null!=n.selectedShift){t.next=7;break}return l()({showClose:!0,message:"Please Select Shift!",type:"warning"}),t.abrupt("return");case 7:if(null!=n.selectedDeck){t.next=10;break}return l()({showClose:!0,message:"Please Select Deck!",type:"warning"}),t.abrupt("return");case 10:if(""!=n.phone){t.next=13;break}return l()({showClose:!0,message:"Phone number is required!",type:"warning"}),t.abrupt("return");case 13:if(0!=!isNaN(n.phone)){t.next=16;break}return l()({showClose:!0,message:"Phone number is invalid!",type:"warning"}),t.abrupt("return");case 16:if(10==n.phone.length){t.next=19;break}return l()({showClose:!0,message:"Phone number is invalid!",type:"warning"}),t.abrupt("return");case 19:if(""!=n.name){t.next=22;break}return l()({showClose:!0,message:"Full Name is required!",type:"warning"}),t.abrupt("return");case 22:if(n.kid.length+n.adult.length!=0){t.next=25;break}return l()({showClose:!0,message:"No of person cannot be zero!",type:"warning"}),t.abrupt("return");case 25:if(!("Dinner Cruise"==n.selectedShift&&n.kid.length+n.adult.length<n.veg+n.nonveg+n.other)){t.next=28;break}return l()({showClose:!0,message:"Invalid Passenger Details!!",type:"warning"}),t.abrupt("return");case 28:if("Dinner Cruise"!=n.selectedShift||n.kid.length+n.adult.length==n.veg+n.nonveg+n.other){t.next=31;break}return l()({showClose:!0,message:"Food Preferrence is required for all persons!",type:"warning"}),t.abrupt("return");case 31:if("Dinner Cruise"!=n.selectedShift){t.next=38;break}if(0!=n.veg||0!=n.nonveg||0!=n.other){t.next=35;break}return l()({showClose:!0,message:"Food Preferrence is required",type:"warning"}),t.abrupt("return");case 35:if(0==n.other||""!=n.desc){t.next=38;break}return l()({showClose:!0,message:"Description is required!",type:"warning"}),t.abrupt("return");case 38:return n.adult[0].name=n.name,n.isLoading=!0,r=new Date,o=r.getFullYear(),d=r.getMonth()+1,m=r.getDate(),dt="".concat(m,"/").concat(d,"/").concat(o),f=new Date(n.selectedDay),v=f.getFullYear(),h=f.getMonth()+1,y=f.getDate(),k="".concat(y,"/").concat(h,"/").concat(v),t.next=52,n.updateInvoice();case 52:return C=t.sent,w=parseInt((new Date).getTime()+""+Math.floor(1e6*Math.random())),data={adultdetails:n.adult,kiddetails:n.kid,infantdetails:n.infantdetails,phone:n.phone,date:k,cruise:n.selectedShift,deck:n.selectedDeck,adult:n.adult.length,kid:n.kid.length,person:n.kid.length+n.adult.length,adultprice:n.aprice,kidprice:n.kprice,total:n.kTotal+n.aTotal,stotal:n.kTotal+n.aTotal,payment_id:"",pay_mode:n.mode,booking_date:dt,payment:"",seatpreference:"",bookingwithgst:"",billaddress:"",infant:n.infant,gstno:"",bookedBy:_.a.authStore.model.id,percent:0,gst:n.gst,gst1:n.gst1,vat:n.vat,vat1:n.vat1,veg:n.veg,nonveg:n.nonveg,other:n.other,desc:n.desc,foodtotal:n.adult.length*n.a_fprice+n.kid.length*n.k_fprice,cruisetotal:n.kid.length*n.kprice+n.adult.length*n.aprice,status:"Completed",cancellable:!0,invoice:C,checkID:w},console.log(data),"https://alfrescogrand.com/api/bookCruise",x={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)},t.next=60,fetch("https://alfrescogrand.com/api/bookCruise",x);case 60:return S=t.sent,t.next=63,S.json();case 63:D=t.sent,S.ok?setTimeout(Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.collection("BookingInitiated").getFirstListItem('checkID="'.concat(data.checkID,'" && phone="').concat(data.phone,'"'));case 2:return t=e.sent,e.next=5,_.a.collection("BookingInitiated").update(t.id,{status:"Completed"});case 5:return t.status="Completed",e.next=8,_.a.collection("Booking").create(t).then((function(e){n.$store.commit("test",e.id),n.$router.push("/qrCode")}));case 8:case"end":return e.stop()}}),e)}))),1e3):(n.isLoading=!1,l()({showClose:!0,message:D.message,type:"warning"}));case 65:case"end":return t.stop()}}),t)})))()},updateInvoice:function(){return Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.collection("invoice").getOne("7kljohapn4u67bh");case 2:return t=e.sent,e.next=5,_.a.collection("invoice").update("7kljohapn4u67bh",{invoice:t.invoice+1});case 5:return e.abrupt("return",t.invoice);case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getcat()}}),L=N,j=(n(686),n(687),n(7)),component=Object(j.a)(L,(function(){var e=this,t=e._self._c;return t("div",[t("base-header",{staticClass:"pb-2"},[t("div",{staticClass:"row align-items-center py-4"},[t("div",{staticClass:"col-lg-6 col-7"},[t("h6",{staticClass:"h2 text-white d-inline-block mb-0"},[e._v("Booking")])])])]),e._v(" "),t("div",{staticClass:"container-fluid mt-3 d-flex flex-wrap"},[t("div",{staticClass:"colm"},[t("div",{staticClass:"row ht"},e._l(e.days,(function(n,i){return t("div",{key:i,staticClass:"box",style:{border:e.selectedDay==n?"2px solid #002fa7":""},on:{click:function(t){0==e.isLoading&&(e.selectedDay=n)}}},[t("h4",[e._v(e._s(n))])])})),0),e._v(" "),t("h1",{staticStyle:{"margin-top":"3rem"}},[e._v("Desire Shift")]),e._v(" "),t("div",{staticClass:"row ht"},e._l(e.shift,(function(n,i){return t("div",{key:i,staticClass:"box",style:{border:e.selectedShift==n?"2px solid #002fa7":"",background:e.cruiseDates.filter((function(t){return t.cruise==n&&t.dates==e.selectedDay})).map((function(e){return e.cruise})).includes(n)&&e.cruiseDates.filter((function(t){return t.cruise==n&&t.dates==e.selectedDay})).map((function(e){return e.dates})).includes(e.selectedDay)?"#f7cdd3":""},on:{click:function(t){0==e.isLoading&&e.selects(n)}}},[t("h4",[e._v(e._s(n))])])})),0),e._v(" "),t("h1",{staticStyle:{"margin-top":"3rem"}},[e._v("Desire Deck")]),e._v(" "),e.deck.length>0?t("div",{staticClass:"row ht"},e._l(e.deck,(function(n,i){return t("div",{key:i,staticClass:"box",style:{border:e.selectedDeck==n?"2px solid #002fa7":""},on:{click:function(t){0==e.isLoading&&(e.selectedDeck=n)}}},[t("h4",[e._v(e._s("No Deck"==n?"Dinner Deck":n))])])})),0):t("div",{staticClass:"row ht"},[e._m(0)]),e._v(" "),t("h1",{staticStyle:{"margin-top":"3rem"}},[e._v("Passenger Details :")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4 mt-4"},[t("base-input",{attrs:{name:"Phone Number",label:"Phone Number (10 digits)",placeholder:"Enter Phone Number",maxLength:"10",minLength:"10",readonly:0!=e.isLoading},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),t("div",{staticClass:"col-md-4 mt-4"},[t("base-input",{attrs:{name:"Full Name",label:"Full Name",placeholder:"Enter Full Name",readonly:0!=e.isLoading},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),t("div",{staticClass:"d-flex flex-wrap"},[t("div",{staticClass:"coli"},[t("h1",{staticStyle:{"margin-bottom":"15px"}},[e._v("Passenger No.")]),e._v(" "),t("div",{staticClass:"d-flex"},[t("button",{staticClass:"btn btn-sm btn-primary mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.minus()}}},[e._v("\n              -\n            ")]),e._v(" "),t("h3",{staticStyle:{"margin-top":"10px","margin-left":"8px","margin-right":"6px"}},[e._v("\n              Adults ("+e._s(e.adult.length)+")\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary ml-2 mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.add()}}},[e._v("\n              +\n            ")])]),e._v(" "),t("div",{staticClass:"d-flex",staticStyle:{"margin-top":"1rem"}},[t("button",{staticClass:"btn btn-sm btn-primary mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.minus1()}}},[e._v("\n              -\n            ")]),e._v(" "),t("h3",{staticStyle:{"margin-top":"10px","margin-left":"16px","margin-right":"7px"}},[e._v("\n              Kids ("+e._s(e.kid.length)+")\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary ml-3 mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.add1()}}},[e._v("\n              +\n            ")])]),e._v(" "),t("div",{staticClass:"d-flex",staticStyle:{"margin-top":"1rem"}},[t("button",{staticClass:"btn btn-sm btn-primary mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.minus2()}}},[e._v("\n              -\n            ")]),e._v(" "),t("h3",{staticStyle:{"margin-top":"10px","margin-left":"8px"}},[e._v("\n              Infant ("+e._s(e.infant)+")\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary ml-3 mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.add2()}}},[e._v("\n              +\n            ")])])]),e._v(" "),"Dinner Cruise"==e.selectedShift?t("div",{staticClass:"coli"},[t("h1",{staticStyle:{"margin-bottom":"15px"}},[e._v("Food Preferrence")]),e._v(" "),t("div",{staticClass:"d-flex"},[t("button",{staticClass:"btn btn-sm btn-primary mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.mi()}}},[e._v("\n              -\n            ")]),e._v(" "),t("h3",{staticStyle:{"margin-top":"10px","margin-left":"35px","margin-right":"35px"}},[e._v("\n              Veg ("+e._s(e.veg)+")\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary ml-2 mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.ad()}}},[e._v("\n              +\n            ")])]),e._v(" "),t("div",{staticClass:"d-flex",staticStyle:{"margin-top":"1rem"}},[t("button",{staticClass:"btn btn-sm btn-primary mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.mi1()}}},[e._v("\n              -\n            ")]),e._v(" "),t("h3",{staticStyle:{"margin-top":"10px","margin-left":"16px","margin-right":"7px"}},[e._v("\n              Non Veg ("+e._s(e.nonveg)+")\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary ml-3 mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.ad1()}}},[e._v("\n              +\n            ")])]),e._v(" "),t("div",{staticClass:"d-flex",staticStyle:{"margin-top":"1rem","margin-bottom":"1rem"}},[t("button",{staticClass:"btn btn-sm btn-primary mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.mi2()}}},[e._v("\n              -\n            ")]),e._v(" "),t("h3",{staticStyle:{"margin-top":"10px","margin-left":"22px","margin-right":"22px"}},[e._v("\n              Other ("+e._s(e.other)+")\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary ml-3 mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.ad2()}}},[e._v("\n              +\n            ")])]),e._v(" "),e.other>0?t("base-input",{attrs:{label:"Description"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.desc,expression:"desc"}],staticClass:"form-control",staticStyle:{"min-height":"5rem"},attrs:{rows:"3"},domProps:{value:e.desc},on:{input:function(t){t.target.composing||(e.desc=t.target.value)}}})]):e._e()],1):e._e()])]),e._v(" "),t("div",{staticClass:"coln"},[t("h1",{staticClass:"text-center",staticStyle:{"margin-top":"4rem"}},[e._v("BOOKING SUMMARY")]),e._v(" "),t("div",{staticClass:"boxes"},[t("div",{staticClass:"lines"},[t("i",{staticClass:"fas fa-calendar-check"}),e._v(" "),t("h3",{staticStyle:{"margin-left":"8px"}},[e._v("\n            "+e._s(e.selectedDay?e.selectedDay:"Please Select Date")+"\n          ")])]),e._v(" "),t("div",{staticClass:"lines"},[t("i",{staticClass:"fas fa-clock"}),e._v(" "),t("h3",{staticStyle:{"margin-left":"6px"}},[e._v("\n            "+e._s(e.selectedShift?e.selectedShift:"Please Select Shift")+"\n          ")])]),e._v(" "),t("div",{staticClass:"lines"},[t("i",{staticClass:"fas fa-couch"}),e._v(" "),t("h3",[e._v("\n            "+e._s(e.selectedDeck?"No Deck"==e.selectedDeck?"Dinner Deck":e.selectedDeck:"Please Select Deck")+"\n          ")])]),e._v(" "),t("div",{staticClass:"lines1",staticStyle:{"margin-top":"2rem"}},[t("h3",[e._v("Adult(s) : X "+e._s(e.adult.length))]),e._v(" "),t("h3",[e._v("Rs "+e._s(e.aTotal))])]),e._v(" "),t("div",{staticClass:"lines1 mb-2"},[t("h3",[e._v("Kids(s) : X "+e._s(e.kid.length))]),e._v(" "),t("h3",[e._v("Rs "+e._s(e.kTotal))])]),e._v(" "),t("div",{staticClass:"divider"}),e._v(" "),t("div",{staticClass:"lines1 mt-2"},[t("h3",[e._v("Total (Including GST)")]),e._v(" "),t("h3",[e._v("Rs "+e._s(e.kTotal+e.aTotal))])]),e._v(" "),t("h4",{staticClass:"mt-4"},[e._v("Payment mode")]),e._v(" "),t("div",{staticClass:"d-flex mt-4"},[t("base-radio",{staticClass:"mb-3 ml-4",attrs:{name:"Cash"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[e._v("\n            Cash\n          ")]),e._v(" "),t("base-radio",{staticClass:"mb-3 ml-4",attrs:{name:"UPI"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[e._v("\n            UPI\n          ")]),e._v(" "),t("base-radio",{staticClass:"mb-3 ml-4",attrs:{name:"Card"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[e._v("\n            Card\n          ")])],1),e._v(" "),t("div",{staticClass:"bt"},[0==e.isLoading?t("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return e.save()}}},[e._v("\n            Save and Proceed\n          ")]):e._e(),e._v(" "),1==e.isLoading?t("base-button",{attrs:{type:"success","native-type":"submit",disabled:""}},[e._v("Processing . Please Wait...\n            "),t("p",{staticClass:"spinner"})]):e._e(),e._v(" "),1==e.isLoading?t("h4",[e._v("(Please Do Not Refresh This Page)")]):e._e()],1)])])])],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"box"},[e("h4",[this._v("Select Cruise First!")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex"},[t("div",{staticClass:"inf"},[t("i",{staticClass:"fa fa-info-circle",staticStyle:{"font-size":"16px"}})]),e._v(" "),t("p",{staticStyle:{"margin-left":"10px"}},[e._v("Adult (Above 12 years)")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex"},[t("div",{staticClass:"inf"},[t("i",{staticClass:"fa fa-info-circle",staticStyle:{"font-size":"16px"}})]),e._v(" "),t("p",{staticStyle:{"margin-left":"10px"}},[e._v("Kid (3-12 years)")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex"},[t("div",{staticClass:"inf"},[t("i",{staticClass:"fa fa-info-circle",staticStyle:{"font-size":"16px"}})]),e._v(" "),t("p",{staticStyle:{"margin-left":"10px"}},[e._v("\n          Infant (0-3 years) . Book a Kid seat if you want a seat for your\n          infant!\n        ")])])}],!1,null,"0aee4e48",null);t.default=component.exports}}]);