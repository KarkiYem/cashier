(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{451:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(144);var c=n(175),d=n(100);function l(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||Object(c.a)(t)||Object(d.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},650:function(t,e,n){},733:function(t,e,n){"use strict";n(650)},799:function(t,e,n){"use strict";n.r(e);n(10);var r=n(451),c=n(11),d=(n(170),n(47),n(43),n(128)),l={layout:"DashboardLayout",middleware:["isAuthenticated","checkAdmin"],data:function(){return{result:null,showScanner:!1,debug:!1,scannerInitialized:!1,ok:null,adult:[],kid:[],all:[],cruise:"",deck:"",re_id:"",date:"",infant:0,veg:0,nonveg:0,other:0,status:"",infantdetails:[]}},methods:{onDetect:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,c,content;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e,n.next=3,t;case 3:c=n.sent,content=c.content,r.result=null,r.result=content,r.getData(r.result),r.toggleScanner();case 9:case"end":return n.stop()}}),n)})))()},toggleScanner:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t).ok=null,n.showScanner=!n.showScanner,n.showScanner&&!n.scannerInitialized?n.scannerInitialized=!0:!n.showScanner&&n.scannerInitialized&&(n.scannerInitialized=!1);case 4:case"end":return e.stop()}}),e)})))()},toggleScanners:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t).ok=null,n.showScanner=!n.showScanner,n.showScanner&&!n.scannerInitialized?n.scannerInitialized=!0:!n.showScanner&&n.scannerInitialized&&(n.scannerInitialized=!1),data={adultdetails:n.adult,kiddetails:n.kid,infantdetails:n.infantdetails},e.next=7,d.a.collection("Booking").update(n.re_id,data);case 7:case"end":return e.stop()}}),e)})))()},opn:function(t,e){var n=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var c,d,l,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=n,1!=t.dis&&(0==e?-1!=(d=c.adult.findIndex((function(e){return JSON.stringify(e)==JSON.stringify(t)})))&&(c.adult[d].entered=!c.adult[d].entered):1==e?-1!=(l=c.kid.findIndex((function(e){return JSON.stringify(e)==JSON.stringify(t)})))&&(c.kid[l].entered=!c.kid[l].entered):2==e&&-1!=(o=c.infantdetails.findIndex((function(e){return JSON.stringify(e)==JSON.stringify(t)})))&&(c.infantdetails[o].entered=!c.infantdetails[o].entered));case 2:case"end":return r.stop()}}),r)})))()},getData:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e,n.prev=1,n.next=4,d.a.collection("Booking").getFullList({filter:'id="'.concat(t,'"')});case 4:0==(l=n.sent).length?c.ok=!1:c.ok=!0,c.adult=l[0].adultdetails,c.kid=l[0].kiddetails,c.infantdetails=l[0].infantdetails,c.adult=c.adult.map((function(t,i){var e;return{id:t.id||i,name:t.name,age:t.age,dis:null!==(e=t.entered)&&void 0!==e&&e,entered:!0}})),c.kid=c.kid.map((function(t,i){var e;return{id:t.id||i+c.adult.length,name:t.name,age:t.age,dis:null!==(e=t.entered)&&void 0!==e&&e,entered:!0}})),c.infantdetails=c.infantdetails.map((function(t,i){var e;return{id:t.id||i+c.adult.length+c.kid.length,name:t.name,age:t.age,dis:null!==(e=t.entered)&&void 0!==e&&e,entered:!0}})),c.all=[].concat(Object(r.a)(c.adult),Object(r.a)(c.kid),Object(r.a)(c.infantdetails)),c.cruise=l[0].cruise,c.deck=l[0].deck,c.re_id=l[0].id,c.infant=l[0].infant,c.date=l[0].date,c.veg=l[0].veg,c.nonveg=l[0].nonveg,c.other=l[0].other,c.status=l[0].status,c.all=c.all.map((function(t){return{id:t.id,name:t.name,age:t.age,dis:t.entered,entered:t.entered||!0}})),n.next=27;break;case 25:n.prev=25,n.t0=n.catch(1);case 27:case"end":return n.stop()}}),n,null,[[1,25]])})))()}}},o=(n(733),n(7)),component=Object(o.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"min-height":"90vh"}},[e("base-header",[e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"col-lg-6 col-7"},[e("nav",{staticClass:"d-none d-md-inline-block ml-md-4",attrs:{"aria-label":"breadcrumb"}},[e("route-bread-crumb")],1)])])]),t._v(" "),e("div",{staticClass:"rows"},[e("div",{staticClass:"middle"},[e("div",{staticClass:"qrcode"},[t.showScanner?t._e():e("i",{staticClass:"fa fa-qrcode icons"}),t._v(" "),t.showScanner?e("qrcode-reader",{staticStyle:{margin:"20px"},attrs:{debug:t.debug},on:{detect:t.onDetect}}):t._e()],1),t._v(" "),t.showScanner?t._e():e("button",{staticClass:"btn btn-success",on:{click:t.toggleScanner}},[t._v("\n        Scan QR Code\n      ")]),t._v(" "),t.showScanner?e("button",{staticClass:"btn btn-success",on:{click:t.toggleScanner}},[t._v("\n        Stop\n      ")]):t._e()]),t._v(" "),e("div",{staticClass:"Details"},[t._m(0),t._v(" "),1==t.ok?e("div",[e("div",{staticClass:"co1",staticStyle:{display:"flex"}},[e("h3",[t._v("\n            "+t._s("No Deck"==t.deck?"Dinner Deck":t.deck)+" - "+t._s(t.cruise)+" -\n            "+t._s(t.date)+"\n          ")])]),t._v(" "),e("div",{staticClass:"co1",staticStyle:{display:"flex"}},[e("h3",{staticStyle:{display:"flex"}},[t._v("\n            Booking Status -\n            "),e("div",{staticStyle:{padding:"4px 8px",color:"white","border-radius":"4px","margin-left":"5px"},style:{backgroundColor:"Completed"===t.status?"rgb(14, 226, 14)":"red"}},[t._v("\n              "+t._s(t.status)+"\n            ")])])]),t._v(" "),e("div",{staticClass:"co1",staticStyle:{display:"flex"}},[e("h3",[t._v("\n            "+t._s(t.all.length)+" "+t._s(t.all.length<2?"Person":"Persons")+" :-\n            "+t._s(t.adult.length)+" "+t._s(t.adult.length<2?"Adult":"Adults")+",\n            "+t._s(t.kid.length)+" "+t._s(t.kid.length<2?"Kid":"Kids")+",\n            "+t._s(t.infant)+" "+t._s(t.infant<2?"Infant":"Infants")+",\n          ")])]),t._v(" "),"Dinner Cruise"==t.cruise?e("div",{staticClass:"co1",staticStyle:{display:"flex"}},[e("h3",[t._v("Veg: "+t._s(t.veg)+", Nonveg: "+t._s(t.nonveg)+", Other: "+t._s(t.other)+",")])]):t._e(),t._v(" "),t._l(t.adult,(function(n,r){return e("div",{key:r},[e("div",{staticClass:"co1",staticStyle:{display:"flex"}},[t._v("\n            "+t._s(r+1)+".  \n            "),e("input",{staticClass:"red-input",attrs:{type:"checkbox",disabled:n.dis},domProps:{checked:n.entered},on:{click:function(e){return t.opn(n,0)}}}),t._v(" "),e("h3",[t._v("\n              "+t._s(""==n.name?"Adult ".concat(r):n.name)+"\n            ")])])])})),t._v(" "),t._l(t.kid,(function(n,r){return e("div",{key:r},[e("div",{staticClass:"co1",staticStyle:{display:"flex"}},[t._v("\n            "+t._s(r+1+t.adult.length)+".  \n            "),e("input",{staticClass:"red-input",attrs:{type:"checkbox",disabled:n.dis},domProps:{checked:n.entered},on:{click:function(e){return t.opn(n,1)}}}),t._v(" "),e("h3",[t._v("\n              "+t._s(""==n.name?"Kid ".concat(r+1):n.name)+"\n            ")])])])})),t._v(" "),t._l(t.infantdetails,(function(n,r){return e("div",{key:r},[e("div",{staticClass:"co1",staticStyle:{display:"flex"}},[t._v("\n            "+t._s(r+1+t.adult.length+t.kid.length)+".  \n            "),e("input",{staticClass:"red-input",attrs:{type:"checkbox",disabled:n.dis},domProps:{checked:n.entered},on:{click:function(e){return t.opn(n,2)}}}),t._v(" "),e("h3",[t._v("\n              "+t._s(""==n.name?"Infant ".concat(r+1):n.name)+"\n            ")])])])})),t._v(" "),e("button",{staticClass:"btn btn-success mt-4",on:{click:t.toggleScanners}},[t._v("\n          Ok\n        ")])],2):t._e(),t._v(" "),null==t.ok?e("div",[t._m(1)]):t._e(),t._v(" "),0==t.ok?e("div",[t._m(2)]):t._e()])])],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"co1",staticStyle:{display:"flex"}},[t("h3",[this._v("Customer Details :-")])])},function(){var t=this._self._c;return t("div",{staticClass:"co1",staticStyle:{display:"flex"}},[t("h3",[this._v("Please scan QR to get the details.")])])},function(){var t=this._self._c;return t("div",{staticClass:"co1",staticStyle:{display:"flex"}},[t("h3",[this._v("Invalid QR Code.")])])}],!1,null,"1fe1a98f",null);e.default=component.exports}}]);